<!DOCTYPE html><html lang="zh-CN"> <head><script>
        if (!localStorage.darkMode) {
            localStorage.darkMode = 'true';
        }

        const setDarkMode = () => {
            if (localStorage.darkMode === 'true' || (!('darkMode' in localStorage) && window.matchMedia('(prefers-color-scheme: dark)').matches)) {
                document.documentElement.classList.add('dark')
                localStorage.darkMode = 'true';
            } else {
                document.documentElement.classList.remove('dark')
                localStorage.darkMode = 'false';
            }
        }

        setDarkMode();
        // // Runs on view transitions navigation
        document.addEventListener('astro:after-swap', setDarkMode);
    </script><meta charset="UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1.0"><meta name="view-transition" content="same-origin"><link rel="alternate" type="application/rss+xml" title="RSS Feed" href="./rss.xml"><title>react SWR 数据请求库浅析| 宋黎斌</title><meta name="title" content="react SWR 数据请求库浅析| 宋黎斌"><meta name="description" content="前端人宋黎斌的个人技术博客, 记录react等web相关知识"><!-- Open Graph Tags (Facebook) --><meta property="og:type" content="blog"><meta property="og:title" content="react SWR 数据请求库浅析| 宋黎斌"><meta property="og:url" content="http://localhost:4321/blog/swr/"><meta property="og:description" content="前端人宋黎斌的个人技术博客, 记录react等web相关知识"><meta property="og:image" content="http://localhost:4321/_astro/icon.b7e03fb8.png"><!-- Twitter --><meta property="twitter:card" content="summary_large_image"><meta property="twitter:title" content="react SWR 数据请求库浅析| 宋黎斌"><meta property="twitter:url" content="http://localhost:4321/blog/swr/"><meta property="twitter:description" content="前端人宋黎斌的个人技术博客, 记录react等web相关知识"><meta property="twitter:image" content="/_astro/icon.b7e03fb8.png"><link rel="preload" href="/fonts/inter-v12-latin_latin-ext-regular.woff2" as="font" crossorigin><link rel="preload" href="/fonts/inter-v12-latin_latin-ext-700.woff2" as="font" crossorigin><link rel="preload" href="/fonts/space-grotesk-v15-latin_latin-ext-regular.woff2" as="font" crossorigin><link rel="preload" href="/fonts/space-grotesk-v15-latin_latin-ext-600.woff2" as="font" crossorigin><link rel="preload" href="/fonts/space-grotesk-v15-latin_latin-ext-700.woff2" as="font" crossorigin><!-- <link rel="preload" href="https://fonts.googleapis.com/css2?family=Noto+Sans+SC&display=swap" as="font" crossorigin> --><meta name="astro-view-transitions-enabled" content="true"><meta name="astro-view-transitions-fallback" content="animate"><link rel="stylesheet" href="/_astro/_slug_.07e646d9.css" />
<style>@keyframes astroFadeInOut{0%{opacity:1}to{opacity:0}}@keyframes astroFadeIn{0%{opacity:0}}@keyframes astroFadeOut{to{opacity:0}}@keyframes astroSlideFromRight{0%{transform:translate(100%)}}@keyframes astroSlideFromLeft{0%{transform:translate(-100%)}}@keyframes astroSlideToRight{to{transform:translate(100%)}}@keyframes astroSlideToLeft{to{transform:translate(-100%)}}@media (prefers-reduced-motion){::view-transition-group(*),::view-transition-old(*),::view-transition-new(*){animation:none!important}[data-astro-transition-scope]{animation:none!important}}
</style><script type="module" src="/_astro/hoisted.41e41f80.js"></script><style>[data-astro-transition-scope="astro-jhat3e4i-1"] { view-transition-name: astro-jhat3e4i-1; }@layer astro { ::view-transition-old(astro-jhat3e4i-1) { 
	animation-duration: 0.2s;
	animation-timing-function: linear;
	animation-fill-mode: forwards;
	animation-name: zoomIn; }::view-transition-new(astro-jhat3e4i-1) { 
	animation-duration: 0.2s;
	animation-timing-function: linear;
	animation-fill-mode: backwards;
	animation-name: zoomIn; }[data-astro-transition=back]::view-transition-old(astro-jhat3e4i-1) { 
	animation-duration: 0.2s;
	animation-timing-function: linear;
	animation-fill-mode: forwards;
	animation-name: zoomIn; }[data-astro-transition=back]::view-transition-new(astro-jhat3e4i-1) { 
	animation-duration: 0.2s;
	animation-timing-function: linear;
	animation-fill-mode: backwards;
	animation-name: zoomIn; } }[data-astro-transition-fallback="old"] [data-astro-transition-scope="astro-jhat3e4i-1"],
			[data-astro-transition-fallback="old"][data-astro-transition-scope="astro-jhat3e4i-1"] { 
	animation-duration: 0.2s;
	animation-timing-function: linear;
	animation-fill-mode: forwards;
	animation-name: zoomIn; }[data-astro-transition-fallback="new"] [data-astro-transition-scope="astro-jhat3e4i-1"],
			[data-astro-transition-fallback="new"][data-astro-transition-scope="astro-jhat3e4i-1"] { 
	animation-duration: 0.2s;
	animation-timing-function: linear;
	animation-fill-mode: backwards;
	animation-name: zoomIn; }[data-astro-transition=back][data-astro-transition-fallback="old"] [data-astro-transition-scope="astro-jhat3e4i-1"],
			[data-astro-transition=back][data-astro-transition-fallback="old"][data-astro-transition-scope="astro-jhat3e4i-1"] { 
	animation-duration: 0.2s;
	animation-timing-function: linear;
	animation-fill-mode: forwards;
	animation-name: zoomIn; }[data-astro-transition=back][data-astro-transition-fallback="new"] [data-astro-transition-scope="astro-jhat3e4i-1"],
			[data-astro-transition=back][data-astro-transition-fallback="new"][data-astro-transition-scope="astro-jhat3e4i-1"] { 
	animation-duration: 0.2s;
	animation-timing-function: linear;
	animation-fill-mode: backwards;
	animation-name: zoomIn; }</style></head> <body class="font-pacamara-inter transition-all duration-300 bg-white dark:bg-pacamara-dark"> <div class="navigation flex-1 hidden absolute top-0 left-0 w-full bg-pacamara-white dark:bg-pacamara-dark transition-all duration-300 p-7 pt-[112px] z-10 shadow-2xl" id="navigation_wrapper"> <nav> <ul class="list-none text-[14px] font-normal flex flex-initial flex-col md:flex-row gap-5"> <li> <a href="/" class="opacity-60 text-pacamara-primary hover:opacity-100 hover:text-pacamara-accent transition-all duration-300 dark:text-white dark:hover:text-pacamara-accent">Home</a> </li> <li> <a href="/blog" class="opacity-60 text-pacamara-primary hover:opacity-100 hover:text-pacamara-accent transition-all duration-300 dark:text-white dark:hover:text-pacamara-accent">Blog</a> </li> <li> <a href="/about-me" class="opacity-60 text-pacamara-primary hover:opacity-100 hover:text-pacamara-accent transition-all duration-300 dark:text-white dark:hover:text-pacamara-accent">About me</a> </li> </ul> </nav> </div> <header class="container mx-auto max-w-screen-xl px-7 py-10 bg-white flex flex-initial flex-row gap-10 items-center justify-between transition-all duration-300 dark:bg-pacamara-dark relative z-20"> <div class="logo flex-none"> <a href="/" class="font-bold font-pacamara-space text-lg hover:text-pacamara-accent transition-all duration-300 dark:text-white dark:hover:text-pacamara-accent">宋黎斌</a> </div> <div class="navigation flex-1 hidden md:block"> <nav> <ul class="list-none text-[14px] font-normal flex flex-initial flex-col md:flex-row gap-5"> <li> <a href="/" class="opacity-60 text-pacamara-primary hover:opacity-100 hover:text-pacamara-accent transition-all duration-300 dark:text-white dark:hover:text-pacamara-accent">Home</a> </li> <li> <a href="/blog" class="opacity-60 text-pacamara-primary hover:opacity-100 hover:text-pacamara-accent transition-all duration-300 dark:text-white dark:hover:text-pacamara-accent">Blog</a> </li> <li> <a href="/about-me" class="opacity-60 text-pacamara-primary hover:opacity-100 hover:text-pacamara-accent transition-all duration-300 dark:text-white dark:hover:text-pacamara-accent">About me</a> </li> </ul> </nav> </div> <div class="relative flex flex-initial flex-row items-center gap-5"> <button id="mode_switcher" class="group" title="Switch mode"> <svg height="512" viewBox="0 0 24 24" width="512" xmlns="http://www.w3.org/2000/svg" class="w-8 h-auto fill-pacamara-secondary transition-all duration-300 hover:fill-pacamara-accent dark:fill-white dark:hover:fill-pacamara-accent"> <path d="m12 18a6 6 0 1 1 6-6 6 6 0 0 1 -6 6zm0-10a4 4 0 1 0 4 4 4 4 0 0 0 -4-4z"></path><path d="m12 15a1 1 0 0 1 -1-1v-4a1 1 0 0 1 1-1 3 3 0 0 1 0 6z"></path><path d="m12 5a1 1 0 0 1 -1-1v-1a1 1 0 0 1 2 0v1a1 1 0 0 1 -1 1z"></path><path d="m17.66 7.34a1 1 0 0 1 -.66-.29 1 1 0 0 1 0-1.41l.71-.71a1 1 0 1 1 1.41 1.41l-.71.71a1 1 0 0 1 -.75.29z"></path><path d="m21 13h-1a1 1 0 0 1 0-2h1a1 1 0 0 1 0 2z"></path><path d="m18.36 19.36a1 1 0 0 1 -.7-.29l-.66-.71a1 1 0 0 1 1.36-1.36l.71.71a1 1 0 0 1 0 1.41 1 1 0 0 1 -.71.24z"></path><path d="m12 22a1 1 0 0 1 -1-1v-1a1 1 0 0 1 2 0v1a1 1 0 0 1 -1 1z"></path><path d="m5.64 19.36a1 1 0 0 1 -.71-.29 1 1 0 0 1 0-1.41l.71-.66a1 1 0 0 1 1.41 1.41l-.71.71a1 1 0 0 1 -.7.24z"></path><path d="m4 13h-1a1 1 0 0 1 0-2h1a1 1 0 0 1 0 2z"></path><path d="m6.34 7.34a1 1 0 0 1 -.7-.29l-.71-.71a1 1 0 0 1 1.41-1.41l.71.71a1 1 0 0 1 0 1.41 1 1 0 0 1 -.71.29z"></path></svg> </button>  <button id="menu_toggle" class="block md:hidden text-white" type="button" aria-controls="navbar-main" aria-expanded="false" aria-label="Toggle navigation"> <svg class="w-8 h-auto fill-pacamara-dark stroke-pacamara-dark transition-all duration-300 hover:fill-pacamara-accent hover:stroke-pacamara-accent dark:fill-pacamara-accent dark:stroke-pacamara-accent dark:hover:fill-pacamara-secondary dark:hover:stroke-pacamara-secondary" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16M4 18h16"></path></svg> </button>  </div> </header>  <article class="px-7 pt-10 mx-auto w-full relative"> <div class="mx-auto
      prose lg:prose-xl prose-headings:font-bold prose-headings:text-pacamara-dark prose-headings:mb-3
      "> <h1 class="transition-all duration-300 dark:text-white">react SWR 数据请求库浅析</h1> <p class="dark:text-white">通过了解react的数据请求隐藏的问题, 来学习数据请求库SWR的功能价值</p> <p class="flex flex-row flex-wrap gap-5 items-center font-pacamara-space mx-auto max-w-screen-lg mb-7"> <span class="group text-[16px] bg-transparent border-pacamara-secondary border-[1px] leading-none rounded-full flex flex-row content-center items-center h-[34px] px-3 text-pacamara-secondary"><span>react</span></span> <small class="
        text-pacamara-primary/50 font-pacamara-space tracking-widest transition-all duration-300 text-[16px]
        dark:text-white/40
    "> 22-11-2023
— 10 min read
</small> </p> </div> <img src="/_astro/icon.b7e03fb8_2myQT7.webp" alt="" loading="eager" decoding="sync" class="block relative mx-auto mt-10 object-cover h-72 md:h-[350px] image-shine rounded-[15px]" data-astro-transition-scope="astro-jhat3e4i-1" width="1200" height="250"> <div class="flex justify-center w-full"> <div class="
        lg:px-0 pt-10 mb-5
        prose lg:prose-xl
        w-full
        prose-headings:transition-all prose-headings:duration-300 prose-headings:font-pacamara-space prose-headings:font-bold prose-headings:text-pacamara-accent prose-headings:mb-0 prose-headings:pb-3 prose-headings:mt-6
        prose-p:transition-all prose-p:duration-300 prose-p:text-pacamara-primary/80 
        prose-li:transition-all prose-li:duration-300 prose-li:text-pacamara-primary/80
        prose-td:transition-all prose-td:duration-300 prose-td:text-pacamara-primary/80
        prose-a:underline prose-a:font-semibold prose-a:transition-all prose-a:duration-300 prose-a:text-pacamara-accent hover:prose-a:text-pacamara-dark
        prose-strong:transition-all prose-strong:duration-300 prose-strong:font-bold
        prose-hr:transition-all prose-hr:duration-300 prose-hr:border-pacamara-secondary/40
        prose-img:rounded-lg prose-img:mx-auto 
        prose-code:transition-all prose-code:duration-300 prose-code:text-pacamara-dark
        dark:prose-headings:text-pacamara-accent dark:prose-p:text-white/70 dark:prose-a:text-white dark:hover:prose-a:text-pacamara-accent dark:prose-strong:text-white dark:prose-li:text-white dark:prose-code:text-white dark:prose-td:text-white/70 dark:prose-hr:border-pacamara-accent/30 dark:prose-tr:border-pacamara-accent/30 dark:prose-thead:border-pacamara-accent/30
      "> <p>了解SWR的功能和作用前, 先让我们来回顾一下传统的react组件中标准的一套数据请求流程</p>
<h2 id="标准的react数据请求">标准的react数据请求</h2>
<pre class="astro-code github-dark" style="background-color:#24292e;color:#e1e4e8;overflow-x:auto" tabindex="0"><code><span class="line"><span style="color:#6A737D">  /* 标准的react数据请求 */</span></span>
<span class="line"><span style="color:#F97583">  const</span><span style="color:#B392F0"> fetchData</span><span style="color:#F97583"> =</span><span style="color:#FFAB70"> url</span><span style="color:#F97583"> =&gt;</span><span style="color:#E1E4E8"> {</span></span>
<span class="line"><span style="color:#F97583">    return</span><span style="color:#B392F0"> fetch</span><span style="color:#E1E4E8">(url).</span><span style="color:#B392F0">then</span><span style="color:#E1E4E8">(</span><span style="color:#FFAB70">res</span><span style="color:#F97583"> =&gt;</span><span style="color:#E1E4E8"> res.</span><span style="color:#B392F0">json</span><span style="color:#E1E4E8">())</span></span>
<span class="line"><span style="color:#E1E4E8">  };</span></span>
<span class="line"><span style="color:#F97583">  const</span><span style="color:#B392F0"> Parent</span><span style="color:#F97583"> =</span><span style="color:#E1E4E8"> () </span><span style="color:#F97583">=&gt;</span><span style="color:#E1E4E8"> {</span></span>
<span class="line"><span style="color:#F97583">    const</span><span style="color:#E1E4E8"> [</span><span style="color:#79B8FF">data</span><span style="color:#E1E4E8">, </span><span style="color:#79B8FF">setData</span><span style="color:#E1E4E8">] </span><span style="color:#F97583">=</span><span style="color:#B392F0"> useState</span><span style="color:#E1E4E8">({</span></span>
<span class="line"><span style="color:#6A737D">      /* 一个请求会有如下的几个基本状态 供前端组件使用 */</span></span>
<span class="line"><span style="color:#E1E4E8">      data: {}, </span><span style="color:#6A737D">// 接口请求成功后 返回数据的数据格式</span></span>
<span class="line"><span style="color:#E1E4E8">      loading: </span><span style="color:#79B8FF">false</span><span style="color:#E1E4E8">, </span><span style="color:#6A737D">// 是否正在请求</span></span>
<span class="line"><span style="color:#E1E4E8">      error: {}, </span><span style="color:#6A737D">// error信息</span></span>
<span class="line"><span style="color:#6A737D">      // 更多</span></span>
<span class="line"><span style="color:#E1E4E8">    });</span></span>
<span class="line"><span style="color:#6A737D">    /* 在父组件请求数据后拿到data后, 通过props drilling或者context等方式传递给 子组件使用 */</span></span>
<span class="line"><span style="color:#B392F0">    useEffect</span><span style="color:#E1E4E8">(() </span><span style="color:#F97583">=&gt;</span><span style="color:#E1E4E8"> {</span></span>
<span class="line"><span style="color:#B392F0">      fetchData</span><span style="color:#E1E4E8">(</span><span style="color:#9ECBFF">&#39;/api/demo&#39;</span><span style="color:#E1E4E8">).</span><span style="color:#B392F0">then</span><span style="color:#E1E4E8">(</span><span style="color:#FFAB70">d</span><span style="color:#F97583"> =&gt;</span><span style="color:#B392F0"> setData</span><span style="color:#E1E4E8">(d));</span></span>
<span class="line"><span style="color:#E1E4E8">    }, []);</span></span>
<span class="line"><span style="color:#F97583">    return</span><span style="color:#E1E4E8"> (</span></span>
<span class="line"><span style="color:#E1E4E8">      &lt;&gt;</span></span>
<span class="line"><span style="color:#E1E4E8">        &lt;</span><span style="color:#79B8FF">ChildA</span><span style="color:#E1E4E8"> /&gt;</span></span>
<span class="line"><span style="color:#E1E4E8">        &lt;</span><span style="color:#79B8FF">ChildB</span><span style="color:#E1E4E8"> /&gt;</span></span>
<span class="line"><span style="color:#E1E4E8">      &lt;/&gt;</span></span>
<span class="line"><span style="color:#E1E4E8">    )</span></span>
<span class="line"><span style="color:#E1E4E8">  }</span></span></code></pre>
<p>在真实的开发场景中, 以上这种模式主要会有两个问题</p>
<ol>
<li>
<p>需要通用的接口数据处理方法处理数据请求的返回数据结构(data, loading, error等状态)</p>
</li>
<li>
<p>接口复用性差, 额外处理<a href="https://react.dev/learn/sharing-state-between-components#lifting-state-up-by-example">状态提升</a>.
当有不同的组件在同一页面用到同一接口时, 为了不使相同接口调用多次, 通常会使用状态提升将接口状态提升至公共父组件处理, 通过props drilling或者context等方式传递给
按需使用, 当子组件数量较多 同时层级嵌套的比较深时, 该方案会特别麻烦, bug率会提升, 开发体验也不好</p>
</li>
</ol>
<h2 id="swr基础使用">SWR基础使用</h2>
<p>下面来看一下在如上的相同场景中使用SWR的写法</p>
<pre class="astro-code github-dark" style="background-color:#24292e;color:#e1e4e8;overflow-x:auto" tabindex="0"><code><span class="line"><span style="color:#F97583">  import</span><span style="color:#E1E4E8"> useSWR </span><span style="color:#F97583">from</span><span style="color:#9ECBFF"> &#39;swr&#39;</span><span style="color:#E1E4E8">;</span></span>
<span class="line"><span style="color:#F97583">  const</span><span style="color:#B392F0"> fetchData</span><span style="color:#F97583"> =</span><span style="color:#FFAB70"> url</span><span style="color:#F97583"> =&gt;</span><span style="color:#E1E4E8"> {</span></span>
<span class="line"><span style="color:#F97583">    return</span><span style="color:#B392F0"> fetch</span><span style="color:#E1E4E8">(url).</span><span style="color:#B392F0">then</span><span style="color:#E1E4E8">(</span><span style="color:#FFAB70">res</span><span style="color:#F97583"> =&gt;</span><span style="color:#E1E4E8"> res.</span><span style="color:#B392F0">json</span><span style="color:#E1E4E8">())</span></span>
<span class="line"><span style="color:#E1E4E8">  };</span></span>
<span class="line"><span style="color:#F97583">  const</span><span style="color:#79B8FF"> Parent</span><span style="color:#F97583"> =&gt;</span><span style="color:#E1E4E8"> () </span><span style="color:#F97583">=&gt;</span><span style="color:#E1E4E8"> {</span></span>
<span class="line"><span style="color:#F97583">    return</span><span style="color:#E1E4E8"> (</span></span>
<span class="line"><span style="color:#E1E4E8">      &lt;&gt;</span></span>
<span class="line"><span style="color:#E1E4E8">        &lt;</span><span style="color:#79B8FF">ChildA</span><span style="color:#E1E4E8"> /&gt;</span></span>
<span class="line"><span style="color:#E1E4E8">        &lt;</span><span style="color:#79B8FF">ChildB</span><span style="color:#E1E4E8"> /&gt;</span></span>
<span class="line"><span style="color:#E1E4E8">      &lt;/&gt;</span></span>
<span class="line"><span style="color:#E1E4E8">    )</span></span>
<span class="line"><span style="color:#E1E4E8">  }</span></span>
<span class="line"><span style="color:#F97583">  const</span><span style="color:#B392F0"> ChildA</span><span style="color:#F97583"> =</span><span style="color:#E1E4E8"> () </span><span style="color:#F97583">=&gt;</span><span style="color:#E1E4E8"> {</span></span>
<span class="line"><span style="color:#F97583">    const</span><span style="color:#E1E4E8"> { </span><span style="color:#79B8FF">data</span><span style="color:#E1E4E8">, </span><span style="color:#79B8FF">loading</span><span style="color:#E1E4E8">, </span><span style="color:#79B8FF">error</span><span style="color:#E1E4E8"> } </span><span style="color:#F97583">=</span><span style="color:#B392F0"> useSWR</span><span style="color:#E1E4E8">(</span><span style="color:#9ECBFF">`/api/demo`</span><span style="color:#E1E4E8">, fetchData);</span></span>
<span class="line"><span style="color:#E1E4E8">  }</span></span>
<span class="line"><span style="color:#F97583">  const</span><span style="color:#B392F0"> ChildB</span><span style="color:#F97583"> =</span><span style="color:#E1E4E8"> () </span><span style="color:#F97583">=&gt;</span><span style="color:#E1E4E8"> {</span></span>
<span class="line"><span style="color:#F97583">    const</span><span style="color:#E1E4E8"> { </span><span style="color:#79B8FF">data</span><span style="color:#E1E4E8">, </span><span style="color:#79B8FF">loading</span><span style="color:#E1E4E8">, </span><span style="color:#79B8FF">error</span><span style="color:#E1E4E8"> } </span><span style="color:#F97583">=</span><span style="color:#B392F0"> useSWR</span><span style="color:#E1E4E8">(</span><span style="color:#9ECBFF">`/api/demo`</span><span style="color:#E1E4E8">, fetchData);</span></span>
<span class="line"><span style="color:#E1E4E8">  }</span></span></code></pre>
<p>通过采用SWR的写法模式, 代码更加具有声明性, 我们只要指定什么组件调用什么接口获取数据即可, 同时SWR内置的 <a href="https://swr.vercel.app/zh-CN/docs/advanced/cache">缓存</a> 功能
完美的解决了请求多次调用的问题, 如果你渲染了Parent组件, 查看Network你会发现请求只调用了一次, perfect!, no more lift state up!😎</p>
<h2 id="竞态问题">竞态问题</h2>
<pre class="astro-code github-dark" style="background-color:#24292e;color:#e1e4e8;overflow-x:auto" tabindex="0"><code><span class="line"><span style="color:#F97583">  export</span><span style="color:#F97583"> default</span><span style="color:#F97583"> function</span><span style="color:#B392F0"> DataDisplayer</span><span style="color:#E1E4E8">(</span><span style="color:#FFAB70">props</span><span style="color:#E1E4E8">) {</span></span>
<span class="line"><span style="color:#F97583">    const</span><span style="color:#E1E4E8"> [</span><span style="color:#79B8FF">data</span><span style="color:#E1E4E8">, </span><span style="color:#79B8FF">setData</span><span style="color:#E1E4E8">] </span><span style="color:#F97583">=</span><span style="color:#B392F0"> useState</span><span style="color:#E1E4E8">(</span><span style="color:#79B8FF">null</span><span style="color:#E1E4E8">);</span></span>
<span class="line"><span style="color:#F97583">    const</span><span style="color:#E1E4E8"> [</span><span style="color:#79B8FF">fetchedId</span><span style="color:#E1E4E8">, </span><span style="color:#79B8FF">setFetchedId</span><span style="color:#E1E4E8">] </span><span style="color:#F97583">=</span><span style="color:#B392F0"> useState</span><span style="color:#E1E4E8">(</span><span style="color:#79B8FF">null</span><span style="color:#E1E4E8">);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#B392F0">    useEffect</span><span style="color:#E1E4E8">(() </span><span style="color:#F97583">=&gt;</span><span style="color:#E1E4E8"> {</span></span>
<span class="line"><span style="color:#F97583">      const</span><span style="color:#B392F0"> fetchData</span><span style="color:#F97583"> =</span><span style="color:#F97583"> async</span><span style="color:#E1E4E8"> () </span><span style="color:#F97583">=&gt;</span><span style="color:#E1E4E8"> {</span></span>
<span class="line"><span style="color:#B392F0">        setTimeout</span><span style="color:#E1E4E8">(</span><span style="color:#F97583">async</span><span style="color:#E1E4E8"> () </span><span style="color:#F97583">=&gt;</span><span style="color:#E1E4E8"> {</span></span>
<span class="line"><span style="color:#F97583">          const</span><span style="color:#79B8FF"> response</span><span style="color:#F97583"> =</span><span style="color:#F97583"> await</span><span style="color:#B392F0"> fetch</span><span style="color:#E1E4E8">(</span></span>
<span class="line"><span style="color:#9ECBFF">            `https://swapi.dev/api/people/${</span><span style="color:#E1E4E8">props</span><span style="color:#9ECBFF">.</span><span style="color:#E1E4E8">id</span><span style="color:#9ECBFF">}/`</span></span>
<span class="line"><span style="color:#E1E4E8">          );</span></span>
<span class="line"><span style="color:#F97583">          const</span><span style="color:#79B8FF"> newData</span><span style="color:#F97583"> =</span><span style="color:#F97583"> await</span><span style="color:#E1E4E8"> response.</span><span style="color:#B392F0">json</span><span style="color:#E1E4E8">();</span></span>
<span class="line"></span>
<span class="line"><span style="color:#B392F0">          setFetchedId</span><span style="color:#E1E4E8">(props.id);</span></span>
<span class="line"><span style="color:#B392F0">          setData</span><span style="color:#E1E4E8">(newData);</span></span>
<span class="line"><span style="color:#6A737D">          // 设置随机定时器 请求乱序返回</span></span>
<span class="line"><span style="color:#E1E4E8">        }, Math.</span><span style="color:#B392F0">round</span><span style="color:#E1E4E8">(Math.</span><span style="color:#B392F0">random</span><span style="color:#E1E4E8">() </span><span style="color:#F97583">*</span><span style="color:#79B8FF"> 12000</span><span style="color:#E1E4E8">));</span></span>
<span class="line"><span style="color:#E1E4E8">      };</span></span>
<span class="line"></span>
<span class="line"><span style="color:#B392F0">      fetchData</span><span style="color:#E1E4E8">();</span></span>
<span class="line"><span style="color:#E1E4E8">    }, [props.id]);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F97583">    return</span><span style="color:#E1E4E8"> &lt;</span><span style="color:#85E89D">div</span><span style="color:#E1E4E8">&gt;{data}&lt;/</span><span style="color:#85E89D">div</span><span style="color:#E1E4E8">&gt;;</span></span>
<span class="line"><span style="color:#E1E4E8">  }</span></span></code></pre>
<p>查看例子 <a href="https://codesandbox.io/p/sandbox/beating-async-race-conditions-in-react-7759f?file=%2Fpackage.json">codesandbox</a>,
运行结果发现dom并没有渲染 预期的最后返回的请求结果, 这就是react组件中常见的请求竞态问题 <a href="https://en.wikipedia.org/wiki/Race_condition">竞态</a></p>
<h3 id="解决竞态问题">解决竞态问题</h3>
<pre class="astro-code github-dark" style="background-color:#24292e;color:#e1e4e8;overflow-x:auto" tabindex="0"><code><span class="line"><span style="color:#B392F0">  useEffect</span><span style="color:#E1E4E8">(() </span><span style="color:#F97583">=&gt;</span><span style="color:#E1E4E8"> {</span></span>
<span class="line"><span style="color:#F97583">    let</span><span style="color:#E1E4E8"> active </span><span style="color:#F97583">=</span><span style="color:#79B8FF"> true</span><span style="color:#E1E4E8">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F97583">    const</span><span style="color:#B392F0"> fetchData</span><span style="color:#F97583"> =</span><span style="color:#F97583"> async</span><span style="color:#E1E4E8"> () </span><span style="color:#F97583">=&gt;</span><span style="color:#E1E4E8"> {</span></span>
<span class="line"><span style="color:#B392F0">      setTimeout</span><span style="color:#E1E4E8">(</span><span style="color:#F97583">async</span><span style="color:#E1E4E8"> () </span><span style="color:#F97583">=&gt;</span><span style="color:#E1E4E8"> {</span></span>
<span class="line"><span style="color:#F97583">        const</span><span style="color:#79B8FF"> response</span><span style="color:#F97583"> =</span><span style="color:#F97583"> await</span><span style="color:#B392F0"> fetch</span><span style="color:#E1E4E8">(</span><span style="color:#9ECBFF">`https://swapi.dev/api/people/${</span><span style="color:#E1E4E8">props</span><span style="color:#9ECBFF">.</span><span style="color:#E1E4E8">id</span><span style="color:#9ECBFF">}/`</span><span style="color:#E1E4E8">);</span></span>
<span class="line"><span style="color:#F97583">        const</span><span style="color:#79B8FF"> newData</span><span style="color:#F97583"> =</span><span style="color:#F97583"> await</span><span style="color:#E1E4E8"> response.</span><span style="color:#B392F0">json</span><span style="color:#E1E4E8">();</span></span>
<span class="line"><span style="color:#F97583">        if</span><span style="color:#E1E4E8"> (active) {</span></span>
<span class="line"><span style="color:#B392F0">          setFetchedId</span><span style="color:#E1E4E8">(props.id);</span></span>
<span class="line"><span style="color:#B392F0">          setData</span><span style="color:#E1E4E8">(newData);</span></span>
<span class="line"><span style="color:#E1E4E8">        }</span></span>
<span class="line"><span style="color:#E1E4E8">      }, Math.</span><span style="color:#B392F0">round</span><span style="color:#E1E4E8">(Math.</span><span style="color:#B392F0">random</span><span style="color:#E1E4E8">() </span><span style="color:#F97583">*</span><span style="color:#79B8FF"> 12000</span><span style="color:#E1E4E8">));</span></span>
<span class="line"><span style="color:#E1E4E8">    };</span></span>
<span class="line"></span>
<span class="line"><span style="color:#B392F0">    fetchData</span><span style="color:#E1E4E8">();</span></span>
<span class="line"><span style="color:#6A737D">    // 下一次useEffect之前 清理</span></span>
<span class="line"><span style="color:#F97583">    return</span><span style="color:#E1E4E8"> () </span><span style="color:#F97583">=&gt;</span><span style="color:#E1E4E8"> {</span></span>
<span class="line"><span style="color:#E1E4E8">      active </span><span style="color:#F97583">=</span><span style="color:#79B8FF"> false</span><span style="color:#E1E4E8">;</span></span>
<span class="line"><span style="color:#E1E4E8">    };</span></span>
<span class="line"><span style="color:#E1E4E8">  }, [props.id]);</span></span></code></pre>
<p>通过将active设为false, 过时的请求无法更新我们最新的状态 (该方案无法解决请求的竞态问题, 但可以确保最后一个请求的结果被使用, 可以使用 <a href="https://developer.mozilla.org/en-US/docs/Web/API/AbortController/signal">Abort signal终止fetch</a></p>
<h2 id="swr价值">SWR价值</h2>
<p>基于以上react中的数据请求问题, 如果我们不选择一个成熟的数据请求库, 那么我们将面对主要以下两个问题</p>
<ol>
<li>复用性差, 需要额外处理接口状态和封装请求逻辑, 在组件数量多的情况下, 传统的数据请求会破坏代码的可维护性</li>
<li>竞态问题</li>
</ol>
<p>而 <a href="https://swr.vercel.app/">SWR</a> 内置的缓存机制和功能帮我们完美解决以上问题, 让开发人员无需在关心这些基础问题, 初次之外, SWR还拥有以下的功能</p>
<ol>
<li>极速、轻量、可重用的 数据请求</li>
<li>内置 缓存 和重复请求去除</li>
<li>间隔轮询, 分页, 重新验证</li>
<li>Optimistic UI</li>
<li><a href="https://swr.vercel.app/">更多</a></li>
</ol>
<h2 id="参考文章">参考文章</h2>
<ol>
<li><a href="https://maxrozen.com/race-conditions-fetching-data-react-with-useeffect">https://maxrozen.com/race-conditions-fetching-data-react-with-useeffect</a></li>
</ol> </div> <aside class="md:block hidden dark:text-white sticky top-[100px] h-[200px] w-[200px] mt-[20px] ml-[60px]"> <h4 class="mb-[10px] text-xl">目录</h4>  <a class="block mt-[16px]" href="#标准的react数据请求">标准的react数据请求</a>  <a class="block mt-[16px]" href="#swr基础使用">SWR基础使用</a>  <a class="block mt-[16px]" href="#竞态问题">竞态问题</a> <a class="block mt-[10px] ml-[10px]" href="#解决竞态问题">解决竞态问题</a> <a class="block mt-[16px]" href="#swr价值">总结</a>  </aside> </div> </article> <section class="mx-auto max-w-screen-lg px-7 lg:px-0 py-10 mb-5 flex flex-col lg:flex-row flex-nowrap gap-10 items-center"> <img src="/_astro/songlibin.cfc1d0bd_dCEK0.webp" class="relative w-[150px] lg:w-[220px] rounded-full" alt="Author's photo" width="200" height="200" loading="lazy" decoding="async"> <div class="
            prose lg:prose-xl max-w-none 
            prose-headings:font-bold prose-headings:text-pacamara-accent 
            prose-p:text-pacamara-primary/70 lg:prose-p:text-[18px] prose-p:transition-all prose-p:duration-300 
            prose-a:font-semibold prose-a:text-pacamara-dark prose-a:hover:text-pacamara-pink prose-a:no-underline prose-a:transition-all prose-a:duration-300
            prose-strong:font-normal 
            prose-headings:font-pacamara-space prose-h2:mb-7
            dark:prose-a:text-white dark:prose-a:hover:text-pacamara-accent dark:prose-p:text-white/70
        "> <h3>宋黎斌</h3> <p>我是一名前端开发者, 目标是成为一名优秀前端架构师😎。我时常探索在react生态圈, 对一切web知识感到好奇, 关注我和我一起探索前端吧</p> </div> </section> <div class="w-full h-[3px] overflow-hidden gradient-line"></div> <div class="pt-10 mb-7 bg-gradient-to-b from-pacamara-dark/[0.05] to-pacamara-dark[0 dark:bg-gradient-to-b dark:from-bg-black/50 to-bg-black/0"> <h2 class="container mx-auto max-w-screen-lg px-7 text-xl text-pacamara-secondary font-bold mb-7">See other articles:</h2> <section class="container mx-auto max-w-screen-lg px-7 py-10 mb-10"> <article class="
        group
        lg:mb-[50px] mb-10 last:mb-0 prose lg:prose-xl max-w-none 
        prose-headings:font-bold prose-headings:text-pacamara-accent 
        prose-p:text-pacamara-primary/70 lg:prose-p:text-[18px] prose-p:transition-all prose-p:duration-300 
        prose-a:font-semibold prose-a:text-pacamara-dark prose-a:hover:text-pacamara-pink prose-a:no-underline prose-a:transition-all prose-a:duration-300
        prose-strong:font-normal 
        prose-headings:font-pacamara-space prose-h2:mb-7 prose-h2:mt-0
        prose-img:mt-0 prose-img:mb-0
        dark:prose-a:text-white dark:prose-a:hover:text-pacamara-accent dark:prose-p:text-white/70
    "> <div class="grid grid-cols-1 lg:grid-cols-[200px_auto] md:grid-cols-[200px_auto] gap-10 items-center"> <div class="post_image"> <a href="/blog/stopusememo"> <img src="/_astro/stopUseMemo.7631bf04_Zuacpy.webp" alt="undefinedThumbnail" class="rounded-[15px] image-shine object-cover h-[200px] -rotate-2" width="750" height="394" loading="lazy" decoding="async"> </a> </div> <div class="post_intro"> <h2> <a href="/blog/stopusememo" class="text-pacamara-dark hover:text-pacamara-accent"> 请别再滥用useMemo了😭 </a> </h2> <p> useMemo everywhere? NO! 滥用useMemo将是一场灾难, 学习何时使用useMemo才是有意义的 </p> <p class="flex flex-row flex-wrap gap-5 items-center mt-5 group-last:mb-0"> <span class="group text-[16px] bg-transparent border-pacamara-secondary border-[1px] leading-none rounded-full flex flex-row content-center items-center h-[34px] px-3 text-pacamara-secondary"><span>react</span></span> <small class="
        text-pacamara-primary/50 font-pacamara-space tracking-widest transition-all duration-300 text-[16px]
        dark:text-white/40
    "> 01-12-2023
— 9 min read
</small> </p> </div> </div> <div class="w-full h-[1px] mt-10 lg:mt-[50px] overflow-hidden gradient-line group-last:hidden"></div> </article><article class="
        group
        lg:mb-[50px] mb-10 last:mb-0 prose lg:prose-xl max-w-none 
        prose-headings:font-bold prose-headings:text-pacamara-accent 
        prose-p:text-pacamara-primary/70 lg:prose-p:text-[18px] prose-p:transition-all prose-p:duration-300 
        prose-a:font-semibold prose-a:text-pacamara-dark prose-a:hover:text-pacamara-pink prose-a:no-underline prose-a:transition-all prose-a:duration-300
        prose-strong:font-normal 
        prose-headings:font-pacamara-space prose-h2:mb-7 prose-h2:mt-0
        prose-img:mt-0 prose-img:mb-0
        dark:prose-a:text-white dark:prose-a:hover:text-pacamara-accent dark:prose-p:text-white/70
    "> <div class="grid grid-cols-1 lg:grid-cols-[200px_auto] md:grid-cols-[200px_auto] gap-10 items-center"> <div class="post_image"> <a href="/blog/usereducer"> <img src="/_astro/useReducer.0e1815a8_ZEucee.webp" alt="undefinedThumbnail" class="rounded-[15px] image-shine object-cover h-[200px] rotate-2" width="750" height="422" loading="lazy" decoding="async"> </a> </div> <div class="post_intro"> <h2> <a href="/blog/usereducer" class="text-pacamara-dark hover:text-pacamara-accent"> useReducer中的各类reducer </a> </h2> <p> actionless reducer及更多reducer用法, 学习各类reducer帮助你提高开发效率和代码质量 </p> <p class="flex flex-row flex-wrap gap-5 items-center mt-5 group-last:mb-0"> <span class="group text-[16px] bg-transparent border-pacamara-secondary border-[1px] leading-none rounded-full flex flex-row content-center items-center h-[34px] px-3 text-pacamara-secondary"><span>react</span></span> <small class="
        text-pacamara-primary/50 font-pacamara-space tracking-widest transition-all duration-300 text-[16px]
        dark:text-white/40
    "> 26-11-2023
— 12 min read
</small> </p> </div> </div> <div class="w-full h-[1px] mt-10 lg:mt-[50px] overflow-hidden gradient-line group-last:hidden"></div> </article> </section> </div>  <div class="w-full h-[1px] overflow-hidden gradient-line"></div> <div class="py-14 transition-all duration-300 bg-gradient-to-r from-pacamara-secondary/10 to-pacamara-accent/10 dark:bg-gradient-to-r dark:from-pacamara-accent/[2%] dark:to-pacamara-secondary/[5%]"> <footer class="container mx-auto max-w-screen-xl flex flex-initial lg:flex-row flex-col gap-10 items-center px-7"> <div class="logo flex-none"> <a href="/" class="font-bold font-pacamara-space text-lg hover:text-pacamara-accent transition-all duration-300 dark:text-white dark:hover:text-pacamara-accent">宋黎斌</a> </div> <ul class="list-none text-[14px] font-normal flex flex-initial flex-row content-center items-center gap-x-[35px]"> <!-- <SocialIcon socialUrl={config?.social?.dribbble} socialType="dribbble" />

            <SocialIcon socialUrl={config?.social?.facebook} socialType="facebook" /> --> <li><a href="https://github.com/webMasterMrBin" target="_blank" aria-label="githublink"><svg class="w-auto h-[20px] transition-all duration-300 fill-pacamara-primary/60 hover:fill-pacamara-secondary dark:fill-pacamara-accent dark:hover:fill-pacamara-secondary" viewBox="0 0 496 512" astro-icon="github"><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6 0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2z"/></svg></a></li> <style>astro-island,astro-slot,astro-static-slot{display:contents}</style><script>(()=>{var e=async t=>{await(await t())()};(self.Astro||(self.Astro={})).load=e;window.dispatchEvent(new Event("astro:load"));})();;(()=>{var b=Object.defineProperty;var f=(c,o,i)=>o in c?b(c,o,{enumerable:!0,configurable:!0,writable:!0,value:i}):c[o]=i;var l=(c,o,i)=>(f(c,typeof o!="symbol"?o+"":o,i),i);var p;{let c={0:t=>m(t),1:t=>i(t),2:t=>new RegExp(t),3:t=>new Date(t),4:t=>new Map(i(t)),5:t=>new Set(i(t)),6:t=>BigInt(t),7:t=>new URL(t),8:t=>new Uint8Array(t),9:t=>new Uint16Array(t),10:t=>new Uint32Array(t)},o=t=>{let[e,r]=t;return e in c?c[e](r):void 0},i=t=>t.map(o),m=t=>typeof t!="object"||t===null?t:Object.fromEntries(Object.entries(t).map(([e,r])=>[e,o(r)]));customElements.get("astro-island")||customElements.define("astro-island",(p=class extends HTMLElement{constructor(){super(...arguments);l(this,"Component");l(this,"hydrator");l(this,"hydrate",async()=>{var d;if(!this.hydrator||!this.isConnected)return;let e=(d=this.parentElement)==null?void 0:d.closest("astro-island[ssr]");if(e){e.addEventListener("astro:hydrate",this.hydrate,{once:!0});return}let r=this.querySelectorAll("astro-slot"),a={},h=this.querySelectorAll("template[data-astro-template]");for(let n of h){let s=n.closest(this.tagName);s!=null&&s.isSameNode(this)&&(a[n.getAttribute("data-astro-template")||"default"]=n.innerHTML,n.remove())}for(let n of r){let s=n.closest(this.tagName);s!=null&&s.isSameNode(this)&&(a[n.getAttribute("name")||"default"]=n.innerHTML)}let u;try{u=this.hasAttribute("props")?m(JSON.parse(this.getAttribute("props"))):{}}catch(n){let s=this.getAttribute("component-url")||"<unknown>",y=this.getAttribute("component-export");throw y&&(s+=` (export ${y})`),console.error(`[hydrate] Error parsing props for component ${s}`,this.getAttribute("props"),n),n}await this.hydrator(this)(this.Component,u,a,{client:this.getAttribute("client")}),this.removeAttribute("ssr"),this.dispatchEvent(new CustomEvent("astro:hydrate"))});l(this,"unmount",()=>{this.isConnected||this.dispatchEvent(new CustomEvent("astro:unmount"))})}disconnectedCallback(){document.removeEventListener("astro:after-swap",this.unmount),document.addEventListener("astro:after-swap",this.unmount,{once:!0})}connectedCallback(){if(!this.hasAttribute("await-children")||document.readyState==="interactive"||document.readyState==="complete")this.childrenConnectedCallback();else{let e=()=>{document.removeEventListener("DOMContentLoaded",e),r.disconnect(),this.childrenConnectedCallback()},r=new MutationObserver(()=>{var a;((a=this.lastChild)==null?void 0:a.nodeType)===Node.COMMENT_NODE&&this.lastChild.nodeValue==="astro:end"&&(this.lastChild.remove(),e())});r.observe(this,{childList:!0}),document.addEventListener("DOMContentLoaded",e)}}async childrenConnectedCallback(){let e=this.getAttribute("before-hydration-url");e&&await import(e),this.start()}start(){let e=JSON.parse(this.getAttribute("opts")),r=this.getAttribute("client");if(Astro[r]===void 0){window.addEventListener(`astro:${r}`,()=>this.start(),{once:!0});return}Astro[r](async()=>{let a=this.getAttribute("renderer-url"),[h,{default:u}]=await Promise.all([import(this.getAttribute("component-url")),a?import(a):()=>()=>{}]),d=this.getAttribute("component-export")||"default";if(!d.includes("."))this.Component=h[d];else{this.Component=h;for(let n of d.split("."))this.Component=this.Component[n]}return this.hydrator=u,this.hydrate},e,this)}attributeChangedCallback(){this.hydrate()}},l(p,"observedAttributes",["props"]),p))}})();</script><astro-island uid="Z1WaSd5" prefix="r0" component-url="/_astro/Wechat.47e76e45.js" component-export="default" renderer-url="/_astro/client.b5be95bc.js" props="{}" ssr="" client="load" opts="{&quot;name&quot;:&quot;Wechat&quot;,&quot;value&quot;:true}" await-children=""><li class="cursor-pointer"><svg style="fill:#FFB4B4" width="20" height="20" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg" fill-rule="evenodd" clip-rule="evenodd"><path d="M12 0c-6.626 0-12 5.372-12 12 0 6.627 5.374 12 12 12 6.627 0 12-5.373 12-12 0-6.628-5.373-12-12-12zm5.543 16.389c.889-.644 1.457-1.597 1.457-2.656 0-1.94-1.888-3.514-4.217-3.514-2.329 0-4.217 1.574-4.217 3.514 0 1.941 1.888 3.514 4.217 3.514.481 0 .946-.068 1.377-.192l.124-.019c.081 0 .154.025.224.065l.923.533.081.026c.078 0 .14-.063.14-.14l-.022-.103-.19-.709-.015-.09c0-.094.047-.178.118-.229zm-7.483-10.049c-2.794 0-5.06 1.888-5.06 4.217 0 1.27.682 2.414 1.748 3.187.086.061.142.161.142.275l-.018.107-.228.851-.027.123c0 .093.076.169.169.169l.097-.032 1.108-.639c.083-.048.172-.078.269-.078l.149.022c.516.149 1.074.231 1.651.231l.278-.006c-.11-.329-.17-.675-.17-1.034 0-2.123 2.066-3.845 4.615-3.845l.275.007c-.381-2.015-2.473-3.555-4.998-3.555zm3.317 6.831c-.31 0-.562-.252-.562-.562 0-.311.252-.562.562-.562.311 0 .563.251.563.562 0 .31-.252.562-.563.562zm2.812 0c-.311 0-.562-.252-.562-.562 0-.311.251-.562.562-.562.31 0 .562.251.562.562 0 .31-.252.562-.562.562zm-7.815-3.289c-.373 0-.675-.302-.675-.675 0-.372.302-.674.675-.674.372 0 .674.302.674.674 0 .373-.302.675-.674.675zm3.373 0c-.373 0-.675-.302-.675-.675 0-.372.302-.674.675-.674.373 0 .675.302.675.674 0 .373-.302.675-.675.675z"></path></svg></li><!--astro:end--></astro-island> <!-- <SocialIcon socialUrl={config?.social?.instagram} socialType="instagram" />

            <SocialIcon socialUrl={config?.social?.mastodon} socialType="mastodon" />

            <SocialIcon socialUrl={config?.social?.pinterest} socialType="pinterest" />

            <SocialIcon socialUrl={config?.social?.skype} socialType="skype" />

            <SocialIcon socialUrl={config?.social?.twitter} socialType="twitter" /> --> </ul> <div class="grow lg:text-right"> <span class="text-[14px] text-pacamara-dark/40 transition-all duration-300 dark:text-pacamara-white/40">
made <span class="text-pacamara-accent">&hearts;</span> by <a href="https://astro.build" target="_blank" class="transition-all duration-300 text-pacamara-dark/60 dark:text-pacamara-white/60 hover:text-pacamara-accent">Astro</a> </span> </div> </footer> </div> </body></html>